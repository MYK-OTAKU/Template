avec les infos du chaier de charge et ces differnet diagram peut m'aider a creer mon backend node js avec les fonctionnalite de base comme l'authentification, la gestion des session je compte utliser sequelize comme orm et la base de donne est phpmyadmin , je veux que tu m'aide a mettre en place une architecture complete logique et strucuter de sorte a etre comprenhensible et maintenable , , en respectant le sprincipe solide et d'autre concept et convention de développement utliser par des ingenieur , chque page separemetn Absolument ! Reprenons le cahier des charges pour y intégrer ces précisions importantes, notamment la relation entre les acteurs et un modèle de données plus détaillé en vue d'une évolutivité future vers le SaaS. --- **Cahier des Charges Détaillé : Application de Gestion Locale pour Centre de Gaming** **Version :** 1.1 **Date :** 18 mai 2025 **Mise à jour :** Précision des rôles acteurs, Modèle de Données détaillé, Considérations SaaS. **1. Introduction** Ce document établit les spécifications fonctionnelles et techniques pour le développement d'une application logicielle de gestion destinée aux opérateurs d'un centre de gaming. L'objectif principal est de fournir un outil complet, local et facile à utiliser pour optimiser la gestion quotidienne, améliorer la rentabilité et offrir un service client efficace, en ciblant spécifiquement les besoins de l'administrateur/gérant et des employés/caissiers du centre. Une attention particulière est portée à la structure des données pour anticiper une possible évolution future vers un modèle d'hébergement mutualisé (SaaS). **2. Contexte et Objectifs du Projet** La gestion d'un centre de gaming implique le suivi précis de l'utilisation des équipements, la gestion des ventes de produits annexes, le contrôle des dépenses, et l'analyse des performances. Les processus manuels ou l'utilisation d'outils génériques peuvent entraîner des erreurs, des pertes de temps et un manque de visibilité sur les opérations. L'application vise à être la solution centralisée et automatisée pour ces défis. Ses objectifs clés sont : * Automatiser et sécuriser le suivi du temps d'utilisation des postes de jeu. * Centraliser la gestion des ventes de sessions de jeu, de produits et de services. * Fournir une vue d'ensemble en temps réel de l'occupation des postes et de l'activité du centre. * Permettre un suivi précis des stocks et des dépenses. * Offrir des outils d'analyse et de reporting détaillés pour la prise de décision. * Simplifier la gestion des abonnements et promotions. * Assurer une installation et une utilisation aisées pour le personnel non technique. * Gérer les accès et les permissions selon les rôles du personnel, avec une hiérarchie claire entre Administrateur et Employé. * **Préparer l'architecture de données pour une évolutivité future vers un modèle multi-centres (SaaS).** **3. Acteurs du Système** Les acteurs interagissant directement avec l'application sont le personnel du centre de gaming. Il existe une relation hiérarchique entre eux : * **Administrateur / Gérant :** Cet acteur **hérite de toutes les capacités de l'Employé/Caissier** et possède en plus des droits étendus sur la configuration du système, la gestion des utilisateurs, l'accès complet aux données financières et statistiques détaillées. * **Employé / Caissier :** Cet acteur gère les opérations quotidiennes (démarrage/arrêt des sessions, ventes, gestion simple du stock, gestion des clients et abonnements) dans la limite des permissions accordées par l'Administrateur. *(Note : Le client final qui joue ou achète des produits n'est *pas* un utilisateur de l'application en termes d'interface directe.)* **4. Problèmes Adressés par l'Application (Approche Problem-Solving)** L'application est conçue pour résoudre les problèmes concrets rencontrés dans un centre de gaming, avec une structure permettant une adaptation future : * **Problème :** Pertes financières dues à un suivi imprécis du temps de jeu ou à des erreurs de calcul manuelles. * **Solution :** Module de Gestion des Sessions avec chronométrage précis, calcul automatique et intégration directe au module de Vente. * **Problème :** Difficulté à connaître la rentabilité réelle par poste ou type de poste. * **Solution :** Statistiques détaillées d'utilisation et de revenus par poste, permettant d'identifier les équipements les plus performants. * **Problème :** Gestion inefficace du stock (ruptures, pertes) et difficulté à suivre les coûts d'achat. * **Solution :** Module de Gestion de Stock avec suivi des quantités, alertes de stock bas, et enregistrement des coûts d'achat pour le calcul de marge. * **Problème :** Manque de visibilité sur les flux financiers (recettes vs dépenses) et la rentabilité globale. * **Solution :** Modules de Vente et de Dépenses intégrés avec rapports financiers consolidés (CA, dépenses, résultat). * **Problème :** Incapacité à prévoir les périodes de forte affluence pour optimiser le personnel et les offres. * **Solution :** Analyse prédictive des heures de pointe basée sur les données historiques d'utilisation. * **Problème :** Gestion complexe et source d'erreurs des abonnements clients et de l'application des réductions. * **Solution :** Module de Gestion Clients et Abonnements simplifiant l'attribution et l'application automatique des avantages. * **Problème :** Risques liés à l'accès aux données sensibles et aux actions critiques par du personnel non autorisé. * **Solution :** Gestion fine des Utilisateurs, Rôles et Permissions, limitant l'accès aux modules financiers et de configuration aux administrateurs. La hiérarchie des rôles renforce cette sécurité. * **Problème :** Coût et complexité des logiciels de gestion traditionnels, souvent basés sur le cloud avec des frais récurrents. * **Solution :** Application locale avec une procédure d'installation simplifiée, réduisant les coûts opérationnels et la dépendance à Internet. * **Problème :** Suivi approximatif des pièces utilisées lors des services de réparation. * **Solution :** Possibilité de lier des articles du stock (pièces) aux services de réparation facturés. * **Problème :** Difficulté à faire évoluer l'application vers un modèle multi-sites ou centralisé sans refonte majeure de la base de données. * **Solution :** Conception du modèle de données (MCD) dès le départ pour permettre l'identification et l'isolation des données par centre, facilitant une future migration vers une architecture SaaS (même si l'entité "Centre" n'est pas utilisée initialement). **5. Exigences Fonctionnelles** Les exigences fonctionnelles sont regroupées par module, en précisant les acteurs autorisés : **5.1. Gestion des Utilisateurs et Accès** * **Authentification :** Les utilisateurs (Administrateur, EmployeCaissier) doivent se connecter avec un identifiant et un mot de passe. * **Gestion des Utilisateurs (Administrateur uniquement) :** Créer, modifier, désactiver, supprimer des comptes utilisateurs. Réinitialiser les mots de passe. Associer un rôle à un utilisateur. * **Gestion des Rôles (Administrateur uniquement) :** Définir et modifier les rôles (Administrateur, Employé/Caissier). Gérer les permissions associées à chaque rôle. * **Gestion des Permissions (Administrateur uniquement) :** Attribuer des permissions spécifiques (voir stats/dépenses, modifier tarifs, gérer utilisateurs, etc.) aux rôles. Le rôle Administrateur a toutes les permissions par défaut. **5.2. Gestion des Postes de Jeu** * **Création/Modification/Suppression (Administrateur) :** Gérer les types de postes (Nom, Tarif Horaire) et les instances de postes (Nom, Type de Poste). * **Configuration des Tarifs (Administrateur) :** Définir et modifier le tarif horaire pour chaque type de poste. * **Suivi d'État (Tous les utilisateurs) :** Visualisation en temps réel de l'état de chaque poste (Disponible, Occupé, En Maintenance). * **Mise en Maintenance (EmployeCaissier) :** Marquer un poste comme indisponible temporairement. * **Vue d'Occupation (Tous les utilisateurs) :** Affichage visuel clair de l'agencement des postes et de leur état actuel. **5.3. Gestion des Sessions de Jeu** * **Démarrer une Session (EmployeCaissier) :** Sélectionner un poste disponible. Choisir l'heure de début (actuelle par défaut, ou future). Option d'associer un Client (si client existant). Option de définir une durée prévue. * **Affichage en Temps Réel (Tous les utilisateurs) :** Montrer les sessions actives : Poste, Heure de Début, Durée Écoulée, Coût Provisoire Calculé en temps réel. * **Prolonger une Session (EmployeCaissier) :** Ajouter du temps à une session active. Le coût provisoire est ajusté dynamiquement. * **Pause Session (EmployeCaissier) :** Mettre en pause le chronomètre d'une session active. Reprendre la session. * **Rappels de Fin (Système/UI) :** Alertes visuelles/sonores lorsque l'heure de fin (prévue ou calculée) approche. * **Clôturer une Session (EmployeCaissier) :** Arrêter définitivement une session. Calculer le coût final basé sur la durée réelle. L'ajouter comme un élément au panier de vente actuel ou à un nouveau panier. **5.4. Gestion des Clients et Abonnements** * **Enregistrement Client (EmployeCaissier) :** Créer et modifier un profil client (Nom, Prénom, Coordonnées optionnelles : Téléphone, Email, Adresse). * **Gestion Types Abonnements (Administrateur) :** Créer et configurer différents types d'abonnements (Nom, Description, Avantages : réduction %, heures offertes, validité). * **Gestion Abonnements Clients (EmployeCaissier) :** Associer un type d'abonnement à un client, définir la date de début/fin de validité. * **Application des Avantages (Système/EmployeCaissier) :** Appliquer automatiquement les réductions/avantages de l'abonnement lorsqu'une session est démarrée ou qu'une vente est effectuée pour un client associé. * **Historique Client (EmployeCaissier) :** Consulter les sessions passées et les achats effectués par un client. **5.5. Gestion du Stock et Ventes** * **Gestion Articles (Administrateur) :** Créer, modifier, supprimer des articles (Produits Physiques avec stock, Services). Attributs : Nom, Description, Type\_Article (Produit, Service), Categorie\_ID, Prix\_Vente, Coût\_Achat (optionnel pour Service), Quantité en Stock (pour produits), Seuil\_Alerte\_Bas (pour produits). * **Gestion Catégories (Administrateur) :** Créer, modifier, supprimer des catégories pour les articles. * **Gestion des Mouvements de Stock (EmployeCaissier) :** Enregistrer les entrées en stock (réception) et les ajustements (inventaire, perte). Les sorties sont gérées via les ventes. * **Alertes Stock Bas (Système/UI) :** Notifications visuelles pour les articles physiques dont le stock est bas. * **Point de Vente (POS) (EmployeCaissier) :** Interface rapide pour ajouter des articles (Produits, Services, Sessions Clôturées) à un panier de vente. Modifier les quantités. Appliquer une réduction manuelle ou sélectionner un client pour appliquer une réduction d'abonnement. * **Encaissement (EmployeCaissier) :** Sélectionner le mode de paiement, enregistrer la transaction. * **Historique des Ventes (EmployeCaissier) :** Consulter les transactions passées. * **Reçus :** Générer un récapitulatif de vente (format simple, affichage ou export). **5.6. Gestion des Dépenses** * **Enregistrement Dépense (EmployeCaissier) :** Saisir une dépense (Date, Montant, CategorieDepense\_ID, Description). * **Gestion Catégories Dépenses (Administrateur) :** Créer, modifier, supprimer des catégories de dépenses. * **Consultation Dépenses (Administrateur) :** Lister et rechercher les dépenses enregistrées. (Accès restreint). **5.7. Gestion des Services de Réparation (Intégré Stock/Vente)** * **Création Service (Administrateur) :** Définir les types de services de réparation comme des Articles de type 'Service'. * **Facturation du Service (EmployeCaissier via POS) :** Vendre le service de réparation via le module de Vente. * **Liaison Pièces Utilisées (Optionnel, EmployeCaissier via POS) :** Ajouter des "Pièces Détachées" (articles du stock) au même panier de vente que le service de réparation pour suivre leur utilisation et leur coût associé. **5.8. Statistiques et Analyses Avancées** * **Tableau de Bord (Tous les utilisateurs - contenu adapté au rôle) :** Vue rapide de l'activité actuelle, indicateurs clés (CA jour, bénéfice si Admin). * **Rapports d'Utilisation Postes (Administrateur) :** Taux d'occupation, temps total d'utilisation, revenus générés par poste et par type de poste, sur différentes périodes. Graphiques pertinents. (Accès restreint aux données financières détaillées). * **Prévision des Heures de Pointe (Administrateur) :** Analyse et visualisation des périodes de forte affluence basées sur l'historique des sessions. * **Rapports de Vente (Administrateur) :** Chiffre d'affaires total, ventes par catégorie d'articles, ventes par article individuel (top ventes), Marge Brute. * **Rapports Financiers (Administrateur) :** Total des recettes (ventes + sessions), Total des dépenses, Résultat (Recettes - Dépenses) sur différentes périodes. Ventilation des dépenses par catégorie. * **Rapports de Stock (EmployeCaissier) :** Liste des articles, quantités en stock, alertes stock bas. (La valeur du stock peut être restreinte à l'Admin). * **Export :** Possibilité d'exporter les données des rapports (CSV, PDF simple). **5.9. Organisation d'Événements (Simple)** * **Planification Tournoi (EmployeCaissier) :** Créer un événement (Nom, Date, Heure, Jeu, Description). * **Gestion Inscriptions (EmployeCaissier) :** Enregistrer manuellement les participants (Nom, ou sélectionner Client). Liste des inscrits pour un événement. **6. Exigences Non-Fonctionnelles** * **Performance :** Temps de réponse rapide (< 2 secondes) pour les opérations courantes. Doit supporter la gestion simultanée de tous les postes prévus par le centre. * **Sécurité :** Authentification robuste. Gestion stricte des autorisations basée sur les rôles. Stockage sécurisé des mots de passe (hashage). Sensibilisation à la sécurité du fichier de base de données local. Journalisation des actions critiques (ex: suppressions, modifications sensibles, accès rapports financiers) pour l'Admin. * **Utilisabilité :** Interface intuitive, ergonomique et claire. Flux de travail logiques. Design adapté aux écrans de PC de bureau. Temps de formation minimal requis. * **Fiabilité :** Stabilité de l'application. Gestion des erreurs avec messages clairs. Robustesse face aux saisies incorrectes. Intégrité des données garantie par la base de données. * **Disponibilité :** Fonctionnement continu pendant les heures d'ouverture. Absence de dépendance à une connexion Internet active pour les opérations courantes. * **Maintenabilité :** Code bien structuré, modulaire et documenté. Facilité d'identifier et corriger les bugs. * **Déploiement et Installation :** **Exigence Critique Majeure.** Processus d'installation sur un PC Windows standard doit être extrêmement simple (installateur/script automatisé gérant prérequis et configuration DB locale). * **Hébergement :** Fonctionne intégralement sur un PC local (Windows principalement). * **Évolutivité (SaaS) :** La structure de la base de données doit être conçue pour permettre l'ajout d'une dimension "Centre" ou "Tenant" pour faciliter une future migration vers un modèle multi-centres sans refonte majeure. **7. Environnement Technique et Architecture** * **Architecture :** Application Web 3-tiers (Frontend <-> Backend <-> Base de Données). * **Frontend :** React.js. Accessible via un navigateur web sur le PC local. * **Backend :** Node.js (Express.js ou framework similaire). Expose une API RESTful. Gère la logique métier, l'authentification, l'autorisation et l'interaction avec la base de données. * **Base de Données :** **À Déterminer.** SQLite fortement recommandé pour la facilité d'installation locale. La structure des tables (MCD détaillé ci-dessous) prendra en compte l'évolutivité SaaS. * **Communication en Temps Réel (Optionnel pour état postes) :** Potentiellement Socket.io. * **Environnement d'Exécution :** PC sous Windows (cible principale). **8. Modélisation pour Power Designer** Cette section fournit les éléments structuraux nécessaires à la création des diagrammes dans Power Designer. **8.1. Diagramme de Cas d'Utilisation (Use Case Diagram)** Représente les interactions entre les Acteurs et les fonctionnalités. * **Acteurs :** * `Administrateur` * `EmployeCaissier` * *Relation :* `Administrateur` **hérite** de `EmployeCaissier`. Dans Power Designer, cela se modélise par une relation de **Généralisation** (flèche de l'acteur spécialisé vers l'acteur généralisé). Cela signifie que l'Administrateur peut initier tous les Cas d'Utilisation que peut initier l'EmployéCaissier. * **Packages de Cas d'Utilisation :** Identiques à la version précédente pour structurer. * **Cas d'Utilisation Principaux et Relations (Mise à jour des acteurs initiateurs) :** * **Package Gestion des Accès :** * `UC_SAuthentifier` (Acteurs : Administrateur, EmployeCaissier) * `UC_GererComptesUtilisateurs` (Acteur : Administrateur) * `UC_ConfigurerPermissions` (Acteur : Administrateur) * *Relation :* La plupart des autres Cas d'Utilisation `<<include>>` `UC_SAuthentifier`. * **Package Gestion des Postes :** * `UC_GererTypesPostes` (Acteur : Administrateur) * `UC_GererInstancesPostes` (Acteur : Administrateur) * `UC_VisualiserEtatPostes` (Acteurs : Administrateur, EmployeCaissier) * `UC_MettrePosteEnMaintenance` (Acteur : EmployeCaissier) * **Package Gestion des Sessions :** * `UC_DemarrerSession` (Acteur : EmployeCaissier) * `<<extend>>` `UC_AssocierClientExistant` * `<<extend>>` `UC_DefinirDureePrevue` * `UC_AfficherSessionsEnCours` (Acteurs : Administrateur, EmployeCaissier) * `UC_ProlongerSession` (Acteur : EmployeCaissier) * `<<include>>` `UC_CalculerCoutSession` * `UC_MettreSessionEnPause` (Acteur : EmployeCaissier) * `UC_CloturerSession` (Acteur : EmployeCaissier) * `<<include>>` `UC_CalculerCoutSession` * `<<include>>` `UC_AjouterSessionAuPanier` * `UC_RecevoirRappelFinSession` (Acteur : EmployeCaissier) *(Initiée par le système)* * **Package Gestion des Ventes & Stock :** * `UC_GererArticles` (Acteur : Administrateur) * `UC_GererCategoriesArticle` (Acteur : Administrateur) * `UC_GererStock` (Acteur : EmployeCaissier) * `UC_VendreArticles` (Acteur : EmployeCaissier) * `<<include>>` `UC_AjouterSessionAuPanier` * `<<include>>` `UC_AjouterProduitAuPanier` * `<<include>>` `UC_AjouterServiceAuPanier` * `<<extend>>` `UC_AppliquerReductionManuelle` * `<<extend>>` `UC_SelectionnerClientPourReductionAbonnement` * `<<include>>` `UC_EnregistrerTransaction` * `<<include>>` `UC_GenererRecu` * `UC_ConsulterHistoriqueVentes` (Acteur : EmployeCaissier) * `UC_RecevoirAlerteStockBas` (Acteur : EmployeCaissier) *(Initiée par le système)* * **Package Gestion Clients & Abonnements :** * `UC_GererClients` (Acteur : EmployeCaissier) * `UC_GererTypesAbonnements` (Acteur : Administrateur) * `UC_GererAbonnementsClients` (Acteur : EmployeCaissier) * `UC_ConsulterHistoriqueClient` (Acteur : EmployeCaissier) * **Package Gestion Financière & Dépenses :** * `UC_GererCategoriesDepense` (Acteur : Administrateur) * `UC_EnregistrerDepense` (Acteur : EmployeCaissier) * `UC_ConsulterDepenses` (Acteur : Administrateur) *(Accès restreint)* * **Package Statistiques & Rapports :** * `UC_ConsulterTableauDeBord` (Acteurs : Administrateur, EmployeCaissier) *(Contenu adapté au rôle)* * `UC_GenererRapportsUtilisationPostes` (Acteur : Administrateur) *(Accès restreint aux détails financiers)* * `UC_GenererRapportsVentes` (Acteur : Administrateur) *(Accès restreint aux détails financiers/marge)* * `UC_GenererRapportsFinanciers` (Acteur : Administrateur) * `UC_GenererRapportsStock` (Acteur : EmployeCaissier) * `UC_PrevoirHeuresPointe` (Acteur : Administrateur) * `UC_ExporterRapports` (Acteur : Administrateur) *(Accès restreint)* * **Package Gestion des Evènements :** * `UC_PlanifierTournoi` (Acteur : EmployeCaissier) * `UC_GererInscriptionsTournoi` (Acteur : EmployeCaissier) *(Note pour Power Designer : Modélisez la généralisation entre Administrateur et EmployeCaissier. Associez chaque Cas d'Utilisation à l'Acteur *le plus bas* dans la hiérarchie qui peut l'initier. Grâce à la généralisation, l'acteur au-dessus héritera automatiquement de la capacité d'initier ces Cas d'Utilisation.)* **8.2. Modèle Conceptuel des Données (MCD) Détaillé** Liste des entités principales avec des attributs plus détaillés, en pensant à la normalisation (au moins 3NF) et à l'évolutivité SaaS (potentiel ajout d'une clé `Centre_ID`). * **Entités et Attributs (Exemples) :** * **`CentreGaming`** *(Potentielle entité pour le futur SaaS, non utilisée directement dans la DB locale initiale, mais conceptuellement présente pour l'isolation des données)* * `Centre_ID` (PK) * `Nom_Centre` * `Adresse` * `Telephone` * `Email_Contact` * `Date_Creation` * `Statut` (Actif, Inactif) * **`Utilisateur`** * `Utilisateur_ID` (PK) * `Centre_ID` (FK - *Ajouter cet attribut dès maintenant, même s'il aura une valeur unique ou nulle dans la version locale. Facilite la migration.*) * `Login` (Unique) * `Mot_De_Passe_Hash` * `Nom` * `Prenom` * `Date_Naissance` (Optionnel) * `Adresse` (Texte long, Optionnel) * `Telephone` (Optionnel) * `Email` (Optionnel) * `Date_Embauche` (Optionnel) * `Salaire` (Décimal, Optionnel - *Attention, donnée sensible, justifie les permissions strictes*) * `Est_Actif` (Booléen) * `Date_Creation` * `Date_Derniere_Connexion` (Optionnel) * `Role_ID` (FK) * **`Role`** * `Role_ID` (PK) * `Nom_Role` (Unique) * `Description` * **`Permission`** * `Permission_ID` (PK) * `Nom_Permission` (Unique, ex: `VIEW_STATS_FINANCIAL`, `MANAGE_USERS`, `EDIT_TARIFFS`) * `Description` * **`RolePermission`** (Table d'association Many-to-Many) * `Role_ID` (PK, FK) * `Permission_ID` (PK, FK) * **`TypePoste`** * `TypePoste_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom_Type` * `Tarif_Horaire` (Décimal) * `Description` (Optionnel) * **`Poste`** * `Poste_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom_Poste` (Unique par Centre) * `Etat` (Enum/String: 'Disponible', 'Occupé', 'Maintenance') * `TypePoste_ID` (FK) * `Date_Ajout` * `Notes_Maintenance` (Texte long, Optionnel) * **`Session`** * `Session_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Poste_ID` (FK) * `Client_ID` (FK - Optionnel) * `Utilisateur_ID_Demarrage` (FK - Optionnel, pour traçabilité) * `Utilisateur_ID_Cloture` (FK - Optionnel, pour traçabilité) * `Heure_Debut` (Timestamp) * `Heure_Fin_Effective` (Timestamp - Nullable si en cours) * `Duree_Effective_Minutes` (Entier - Calculé à la fin) * `Cout_Calcule_Final` (Décimal - Calculé à la fin) * `Etat_Session` (Enum/String: 'En Cours', 'Cloturée', 'Annulée', 'En Pause') * `Heure_Fin_Prevue` (Timestamp - Optionnel) * `Est_En_Pause` (Booléen) * `Date_Creation` (Timestamp) * `Date_Mise_A_Jour` (Timestamp) * **`Client`** * `Client_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom` * `Prenom` * `Date_Naissance` (Optionnel) * `Telephone` (Optionnel) * `Email` (Optionnel) * `Adresse` (Texte long, Optionnel) * `Date_Creation` * `Notes_Client` (Texte long, Optionnel) * **`AbonnementClient`** * `AbonnementClient_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Client_ID` (FK) * `TypeAbonnement_ID` (FK) * `Date_Debut_Validite` (Date) * `Date_Fin_Validite` (Date) * `Est_Actif` (Booléen - Calculé ou mis à jour par système) * `Date_Attribution` * **`TypeAbonnement`** * `TypeAbonnement_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom` * `Description` * `Type_Benefice` (Enum/String: 'reduction\_pct\_session', 'reduction\_pct\_produit', 'heures\_offertes') * `Valeur_Benefice` (Décimal - ex: 10.0 pour 10%, 5.0 pour 5 heures) * `Duree_Validite_Jours` (Entier - Optionnel, pour calcul date fin) * **`Article`** * `Article_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom` * `Description` (Optionnel) * `Type_Article` (Enum/String: 'Produit', 'Service') * `Categorie_ID` (FK) * `Prix_Vente` (Décimal) * `Cout_Achat_Moyen` (Décimal - Pour calcul de marge, peut être mis à jour lors des réceptions) * `Date_Creation` * `Est_Actif` (Booléen) * **`CategorieArticle`** * `Categorie_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom_Categorie` (Unique par Centre) * **`Stock`** *(Uniquement pour les Articles de type 'Produit')* * `Stock_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Article_ID` (PK, FK - Unique) * `Quantite_En_Stock` (Décimal - peut gérer des fractions si besoin) * `Seuil_Alerte_Bas` (Décimal) * `Date_Derniere_Mise_A_Jour` * **`MouvementStock`** *(Pour traçabilité fine, optionnel initialement mais bon pour normalisation/audit)* * `Mouvement_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Article_ID` (FK) * `Type_Mouvement` (Enum/String: 'Entree', 'Sortie', 'Ajustement') * `Quantite_Affectee` (Décimal) * `Date_Heure` (Timestamp) * `Source_Mouvement` (Ex: 'Vente', 'Reception', 'Inventaire') * `Reference_Source_ID` (FK - Lien vers Transaction\_ID, Reception\_ID, etc.) * `Utilisateur_ID` (FK - Qui a enregistré le mouvement) * **`Transaction`** *(Représente une vente complète)* * `Transaction_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Date_Heure` (Timestamp) * `Total_HT` (Décimal) * `Total_TTC` (Décimal) * `Montant_Encaisse` (Décimal) * `Rendu` (Décimal) * `Mode_Paiement` (Enum/String: 'Especes', 'CB', 'Virement', 'Autre') * `Statut_Transaction` (Enum/String: 'Terminee', 'Annulee') * `Utilisateur_ID_Caissier` (FK) * `Client_ID` (FK - Optionnel) * `Reduction_Globale_Appliquee` (Décimal - Montant total réduction) * `Notes_Transaction` (Texte long, Optionnel) * **`LigneTransaction`** *(Détail d'une transaction)* * `LigneTransaction_ID` (PK) * `Transaction_ID` (PK, FK) * `Article_ID` (FK) * `Session_ID` (FK - Nullable si la ligne n'est pas une session) * `Quantite` (Décimal) * `Prix_Unitaire_Vendu` (Décimal - Prix après réductions spécifiques à l'article/session) * `Cout_Achat_Unitaire` (Décimal - Pour calcul de marge sur cette ligne) * `Reduction_Ligne` (Décimal - Montant réduction sur cette ligne) * `Sous_Total_Ligne_HT` (Décimal) * `Sous_Total_Ligne_TTC` (Décimal) * `Type_Ligne` (Enum/String: 'Session', 'Produit', 'Service') * **`Depense`** * `Depense_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Date_Depense` (Date) * `Montant` (Décimal) * `CategorieDepense_ID` (FK) * `Description` (Texte long) * `Utilisateur_ID` (FK - Qui a enregistré) * `Date_Enregistrement` (Timestamp) * **`CategorieDepense`** * `CategorieDepense_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom_Categorie` (Unique par Centre) * **`Tournoi`** * `Tournoi_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Nom` * `Date_Heure_Debut` (Timestamp) * `Jeu` * `Description` (Optionnel) * `Nombre_Max_Participants` (Entier, Optionnel) * `Statut` (Enum/String: 'Planifie', 'En Cours', 'Termine', 'Annule') * **`ParticipantTournoi`** * `ParticipantTournoi_ID` (PK) * `Centre_ID` (FK - *Pour SaaS*) * `Tournoi_ID` (FK) * `Client_ID` (FK - Nullable si participant non client) * `Nom_Participant_Libre` (String - Si pas associé à un client) * `Date_Inscription` * `Statut_Participant` (Enum/String: 'Inscrit', 'Present', 'Absent') * **Relations et Cardinalités (MCD) :** * `CentreGaming` 1 -- N `Utilisateur` * `CentreGaming` 1 -- N `TypePoste` * `CentreGaming` 1 -- N `Poste` * `CentreGaming` 1 -- N `Session` * `CentreGaming` 1 -- N `Client` * `CentreGaming` 1 -- N `AbonnementClient` * `CentreGaming` 1 -- N `TypeAbonnement` * `CentreGaming` 1 -- N `Article` * `CentreGaming` 1 -- N `CategorieArticle` * `CentreGaming` 1 -- N `Stock` * `CentreGaming` 1 -- N `MouvementStock` * `CentreGaming` 1 -- N `Transaction` * `CentreGaming` 1 -- N `Depense` * `CentreGaming` 1 -- N `CategorieDepense` * `CentreGaming` 1 -- N `Tournoi` * `CentreGaming` 1 -- N `ParticipantTournoi` * `Role` 1 -- N `Utilisateur` * `Role` N -- N `Permission` (Via `RolePermission` table d'association) * `TypePoste` 1 -- N `Poste` * `Poste` 1 -- N `Session` * `Client` 0..1 -- N `Session` * `Utilisateur` 0..1 -- N `Session` (Utilisateur\_ID\_Demarrage) * `Utilisateur` 0..1 -- N `Session` (Utilisateur\_ID\_Cloture) * `Client` 1 -- N `AbonnementClient` * `TypeAbonnement` 1 -- N `AbonnementClient` * `CategorieArticle` 1 -- N `Article` * `Article` 1 -- 0..1 `Stock` * `Article` 1 -- N `MouvementStock` * `Utilisateur` 1 -- N `MouvementStock` * `Transaction` 1 -- N `LigneTransaction` * `Article` 1 -- N `LigneTransaction` * `Session` 0..1 -- 0..1 `LigneTransaction` (Une ligne peut être une session) * `Utilisateur` 1 -- N `Transaction` (Caissier) * `Client` 0..1 -- N `Transaction` (Client associé à la vente) * `CategorieDepense` 1 -- N `Depense` * `Utilisateur` 1 -- N `Depense` (Qui a enregistré) * `Tournoi` 1 -- N `ParticipantTournoi` * `Client` 0..1 -- N `ParticipantTournoi` *(Note pour Power Designer : Créez les entités avec tous les attributs listés. Définissez les types de données précis (VARCHAR, INT, DECIMAL, BOOLEAN, TIMESTAMP, DATE, TEXT). Établissez les relations avec les cardinalités indiquées. Ajoutez les clés primaires (PK) et étrangères (FK). Assurez-vous que chaque table a une clé primaire. Vérifiez la normalisation (3NF : chaque attribut non clé dépend entièrement de la clé primaire, de toute la clé primaire si elle est composite, et de rien d'autre que la clé primaire). L'ajout de `Centre_ID` à presque toutes les tables est la clé pour l'évolutivité SaaS, permettant de partitionner ou filtrer les données par centre.)* **8.3. Description des Interfaces Utilisateur Principales** Identique à la version précédente, mais l'affichage et les actions disponibles sur chaque écran seront conditionnés par le rôle et les permissions de l'utilisateur connecté. **9. Contraintes et Exigences Spécifiques** Identiques à la version précédente, avec un accent renforcé sur la conception de la base de données pour l'évolutivité SaaS. **10. Planification et Livrables** Identiques à la version précédente. Les livrables incluront spécifiquement les fichiers Power Designer (.pdm, .bpm) reflétant les diagrammes détaillés. **11. Recommandations techniques supplémentaires** * **Base de données :** SQLite pour la version locale initiale est toujours la recommandation principale pour la facilité d'installation. Pour une future version SaaS, PostgreSQL ou MySQL seraient plus adaptés pour leur robustesse et gestion multi-utilisateurs/multi-bases. * **Architecture backend :** Express.js ou Fastify. * **État des sessions :** Socket.io pour les mises à jour en temps réel sur le dashboard. * **UI/UX :** Framework Material UI, Ant Design, ou Tailwind CSS + une librairie de composants. * **Reporting :** Chart.js, Recharts, ou Nivo pour les visualisations. * **Authentification :** JWT (JSON Web Tokens) pour la gestion des sessions utilisateur. * **Sauvegarde :** Système automatisé de backup du fichier de base de données SQLite (script simple de copie planifiée). * **Pour le SaaS futur :** Envisager une base de données par centre (modèle "Database per Tenant") ou un schéma unique avec la colonne `Centre_ID` (modèle "Schema per Tenant" ou "Shared Schema"). Le MCD proposé avec `Centre_ID` s'adapte bien aux deux derniers modèles. **12. Précisions sur les diagrammes Power Designer** * **Diagramme de Cas d'Utilisation :** * Définir les acteurs `Administrateur` et `EmployeCaissier`. * Créer une relation de **Généralisation** de `Administrateur` vers `EmployeCaissier`. * Créer les packages de Cas d'Utilisation. * Lister les Cas d'Utilisation dans les packages appropriés. * Associer chaque Cas d'Utilisation à l'acteur *le plus bas* dans la hiérarchie qui peut l'initier (principalement `EmployeCaissier` ou `Administrateur` pour les tâches spécifiques). * Utiliser les relations `<<include>>` et `<<extend>>` comme décrit précédemment. * **Modèle Conceptuel des Données (MCD) :** * Créer toutes les entités listées dans la section 8.2. * Ajouter tous les attributs détaillés pour chaque entité. * Définir les types de données précis. * Définir les clés primaires (PK). * Créer les relations entre les entités avec les cardinalités appropriées. * Définir les clés étrangères (FK). * **Ajouter l'attribut `Centre_ID` (FK) à la majorité des entités** (sauf `Role`, `Permission`, `RolePermission` qui peuvent être globales). Même si ce FK pointe potentiellement vers une entité `CentreGaming` non modélisée ou non utilisée dans la version locale, sa présence structure les données pour le futur. * Vérifier et appliquer les règles de normalisation (3NF). --- **Approbation** Ce Cahier des Charges a été examiné et approuvé par : **Pour le Client (Représentant du Centre de Gaming) :** Nom : Date : Signature : **Pour l'Équipe de Développement :** Nom : Date : Signature : --- Ce document enrichi devrait vous fournir une base très solide pour commencer votre modélisation dans Power Designer, en tenant compte des spécificités des rôles utilisateurs et en préparant l'application pour son évolutivité future. N'hésitez pas si d'autres questions ou précisions sont nécessaires !
